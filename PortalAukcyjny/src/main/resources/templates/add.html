<html layout:decorator="layout">
<head>
    <meta charset="utf-8"/>
</head>
<body>

   <div layout:fragment="content">
       <h2>Dodaj ofertę</h2>
       <form class="form form--half" action="/add" method="post" enctype="multipart/form-data">
           <div class="form__group">
               <label>Tytuł:</label>
               <input type="text" name="name" required="required"/>
               <span class="form__error"></span>
           </div>
           <div class="form__group">
               <label>Koniec aukcji:</label>
               <input type="text" name="date" required="required" id="flatpickr"/>
               <span class="form__error"></span>
           </div>
           <div class="form__group">
               <label>Cena minimalna:</label>
               <input type="number" name="price" required="required"/>
               <span class="form__error"></span>
           </div>
           <div class="form__group">
               <label>Zdjęcie:</label>
               <div class="file-wrapper">
                   <div class="file-wrapper__preview"><img id="preview" style="max-width: 100%;"/></div>
                   <div class="file-wrapper__btn">
                       <input type="file" name="file" required="required"/>
                       <button class="btn">Wczytaj</button>
                   </div>
               </div>
               <span class="form__error"></span>
           </div>
           <div class="form__group">
               <label>Opis:</label>
               <textarea name="desc" required="required"></textarea>
               <span class="form__error"></span>
           </div>
           <input type="submit" class="btn" name="submit" value="Dodaj aukcje"/>
       </form>
       
       <script type="text/javascript">
	    document.querySelector('input[type="file"]').addEventListener('change', function(){
	        var file = this.files[0];
	        var preview = document.getElementById('preview');
	        var reader  = new FileReader();
	        reader.addEventListener("load", function () {
	            preview.src = reader.result;
	        }, false);
	
	        if (file) reader.readAsDataURL(file);
	    })
	    
		flatpickr('#flatpickr',{
		  enableTime: true,
		  dateFormat: 'Y-m-d H:i',
		  altFormat: null,
		  altInput: null,
		  minDate: null,
		  maxDate: null,
		  locale: "pl",
		  time_24hr: true
		});
			    
	</script>
   </div>

</body>
</html>
